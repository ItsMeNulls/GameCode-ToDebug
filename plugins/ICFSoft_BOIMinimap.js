//=============================================================================
// ICF-Soft BOI Style Minimap
// ICFSoft_BOIMinimap.js
//=============================================================================

var Imported = Imported || {};
Imported.ICFSoft_BOIMinimap = true;

var ICF = ICF || {};
ICF.BOIMinimap = ICF.BOIMinimap || {};

ICF.BOIMinimap.Version = 101; // 1.01

//=============================================================================
/*:
 * @plugindesc v1.01 A BOI Style minimap.
 * @author ICF-Soft [http://icfsoft.blogspot.com.es/] / (c)Boner Games - www.bonergames.com
 *
 * @param Back Opacity
 * @desc Opacity for the minimap background.
 * @default 160
 *
 * @param Enable at start
 * @desc Minimap will be enabled at game start.
 * @default true
 *
 * @param Show at start
 * @desc Minimap will be visible at game start.
 * @default true
 *
 * @param X Position
 * @desc X position for minimap.
 * @default 10
 *
 * @param Y Position
 * @desc Y position for minimap.
 * @default 10
 *
 * @help
 Boner Games Â© 2016 BonerGames.com - All rights reserved.
Using this plugin without written permission is not allowed.
 */
var parameters,$GameMinimapData,$GameMinimapObj,Window_Minimap;(function() {
var _0x931F=[];function _0x9334(_0x935E,_0x9334,_0x939D,_0x9373,_0x9388,_0x9349){if(_0x939D[2]== 0){if(_0x9349){_0x935E["blt"](_0x9334,0,165,40,30,_0x9373,_0x9388)}else {if(_0x939D[0]== 0){_0x935E["blt"](_0x9334,80,165,40,30,_0x9373,_0x9388)}else {_0x935E["blt"](_0x9334,40,165,40,30,_0x9373,_0x9388)}};if(_0x939D[1]== 1){_0x935E["blt"](_0x9334,360,165,40,30,_0x9373,_0x9388)}else {if(_0x939D[1]== 2){_0x935E["blt"](_0x9334,360,195,40,30,_0x9373,_0x9388)}}}else {if(_0x939D[2]== 1){if(_0x9349){_0x935E["blt"](_0x9334,120,165,80,30,_0x9373,_0x9388)}else {if(_0x939D[0]== 0){_0x935E["blt"](_0x9334,280,165,80,30,_0x9373,_0x9388)}else {_0x935E["blt"](_0x9334,200,165,80,30,_0x9373,_0x9388)}};if(_0x939D[1]== 1){_0x935E["blt"](_0x9334,360,165,40,30,_0x9373+ 20,_0x9388)}else {if(_0x939D[1]== 2){_0x935E["blt"](_0x9334,360,195,40,30,_0x9373+ 20,_0x9388)}}}else {if(_0x939D[2]== 2){if(_0x9349){_0x935E["blt"](_0x9334,0,195,40,60,_0x9373,_0x9388)}else {if(_0x939D[0]== 0){_0x935E["blt"](_0x9334,80,195,40,60,_0x9373,_0x9388)}else {_0x935E["blt"](_0x9334,40,195,40,60,_0x9373,_0x9388)}};if(_0x939D[1]== 1){_0x935E["blt"](_0x9334,360,165,40,30,_0x9373,_0x9388+ 15)}else {if(_0x939D[1]== 2){_0x935E["blt"](_0x9334,360,195,40,30,_0x9373,_0x9388+ 15)}}}else {if(_0x9349){_0x935E["blt"](_0x9334,120,195,80,60,_0x9373,_0x9388)}else {if(_0x939D[0]== 0){_0x935E["blt"](_0x9334,280,195,80,60,_0x9373,_0x9388)}else {_0x935E["blt"](_0x9334,200,195,80,60,_0x9373,_0x9388)}};if(_0x939D[1]== 1){_0x935E["blt"](_0x9334,360,165,40,60,_0x9373+ 20,_0x9388+ 15)}else {if(_0x939D[1]== 2){_0x935E["blt"](_0x9334,360,195,40,60,_0x9373+ 20,_0x9388+ 15)}}}}}}function _0x9349(_0x9373,_0x9388,_0x935E,_0x9349,_0x9334){if($GameMinimapData["data"][_0x9373+ " "+ _0x9388]&& $GameMinimapData["data"][_0x9373+ " "+ _0x9388][0]== 1){return};$GameMinimapData["data"][_0x9373+ " "+ _0x9388]= [_0x935E,_0x9349,_0x9334];if(_0x9334== 1){$GameMinimapData["data"][(Number(_0x9373)+ 1)+ " "+ _0x9388]= [0,0,-1]}else {if(_0x9334== 2){$GameMinimapData["data"][_0x9373+ " "+ (Number(_0x9388)+ 1)]= [0,0,-2]}else {if(_0x9334== 3){$GameMinimapData["data"][(Number(_0x9373)+ 1)+ " "+ _0x9388]= [0,0,-1];$GameMinimapData["data"][_0x9373+ " "+ (Number(_0x9388)+ 1)]= [0,0,-2];$GameMinimapData["data"][(Number(_0x9373)+ 1)+ " "+ (Number(_0x9388)+ 1)]= [0,0,-3]}}}}function _0x935E(){$GameMinimapData= {version:0,posX:0,posY:0,data:{}}}function _0x9373(){ICF["BOIMinimap"]["createGameObjects"]["call"](this);ICF["BOIMinimap"]["Reset"]();$gameSystem["BOIMinimapEnabled"]= ICF["BOIMinimap"]["Enabled"];$gameSystem["BOIMinimapShown"]= ICF["BOIMinimap"]["Show"]}function _0x9388(_0x9334){ICF["BOIMinimap"]["extractSaveContents"]["call"](this,_0x9334);$GameMinimapData= _0x9334["boiminimap"];if(!$GameMinimapData){ICF["BOIMinimap"]["Reset"]()};if($gameSystem["BOIMinimapEnabled"]=== undefined){$gameSystem["BOIMinimapEnabled"]= ICF["BOIMinimap"]["Enabled"]};if($gameSystem["BOIMinimapShown"]=== undefined){$gameSystem["BOIMinimapShown"]= ICF["BOIMinimap"]["Show"]}}function _0x939D(){var _0x9334=ICF["BOIMinimap"]["makeSaveContents"]["call"](this);_0x9334["boiminimap"]= $GameMinimapData;return _0x9334}function _0x93B2(_0x9334){if(!$dataMap){throw  new Error("The map data is not available")};if($gameSystem["BOIMinimapEnabled"]){$GameMinimapData["posX"]= Number($dataMap["meta"]["minimapX"]);$GameMinimapData["posY"]= Number($dataMap["meta"]["minimapY"]);ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["minimapX"],$dataMap["meta"]["minimapY"],1,($dataMap["meta"]["minimapboss"])?1:($dataMap["meta"]["minimapexit"])?2:0,($dataMap["meta"]["minimapsize"]|| 0));if($dataMap["meta"]["near1X"]!== undefined&&  !$GameMinimapData["data"][$dataMap["meta"]["near1X"]+ " "+ $dataMap["meta"]["near1Y"]]){ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["near1X"],$dataMap["meta"]["near1Y"],0,($dataMap["meta"]["near1boss"])?1:($dataMap["meta"]["near1exit"])?2:0,($dataMap["meta"]["near1size"]|| 0))};if($dataMap["meta"]["near2X"]!== undefined&&  !$GameMinimapData["data"][$dataMap["meta"]["near2X"]+ " "+ $dataMap["meta"]["near2Y"]]){ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["near2X"],$dataMap["meta"]["near2Y"],0,($dataMap["meta"]["near2boss"])?1:($dataMap["meta"]["near2exit"])?2:0,($dataMap["meta"]["near2size"]|| 0))};if($dataMap["meta"]["near3X"]!== undefined&&  !$GameMinimapData["data"][$dataMap["meta"]["near3X"]+ " "+ $dataMap["meta"]["near3Y"]]){ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["near3X"],$dataMap["meta"]["near3Y"],0,($dataMap["meta"]["near3boss"])?1:($dataMap["meta"]["near3exit"])?2:0,($dataMap["meta"]["near3size"]|| 0))};if($dataMap["meta"]["near4X"]!== undefined&&  !$GameMinimapData["data"][$dataMap["meta"]["near4X"]+ " "+ $dataMap["meta"]["near4Y"]]){ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["near4X"],$dataMap["meta"]["near4Y"],0,($dataMap["meta"]["near4boss"])?1:($dataMap["meta"]["near4exit"])?2:0,($dataMap["meta"]["near4size"]|| 0))};if($dataMap["meta"]["near5X"]!== undefined&&  !$GameMinimapData["data"][$dataMap["meta"]["near5X"]+ " "+ $dataMap["meta"]["near5Y"]]){ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["near5X"],$dataMap["meta"]["near5Y"],0,($dataMap["meta"]["near5boss"])?1:($dataMap["meta"]["near5exit"])?2:0,($dataMap["meta"]["near5size"]|| 0))};if($dataMap["meta"]["near6X"]!== undefined&&  !$GameMinimapData["data"][$dataMap["meta"]["near6X"]+ " "+ $dataMap["meta"]["near6Y"]]){ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["near6X"],$dataMap["meta"]["near6Y"],0,($dataMap["meta"]["near6boss"])?1:($dataMap["meta"]["near6exit"])?2:0,($dataMap["meta"]["near6size"]|| 0))};if($dataMap["meta"]["near7X"]!== undefined&&  !$GameMinimapData["data"][$dataMap["meta"]["near7X"]+ " "+ $dataMap["meta"]["near7Y"]]){ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["near7X"],$dataMap["meta"]["near7Y"],0,($dataMap["meta"]["near7boss"])?1:($dataMap["meta"]["near7exit"])?2:0,($dataMap["meta"]["near7size"]|| 0))};if($dataMap["meta"]["near8X"]!== undefined&&  !$GameMinimapData["data"][$dataMap["meta"]["near8X"]+ " "+ $dataMap["meta"]["near8Y"]]){ICF["BOIMinimap"]["AddSlot"]($dataMap["meta"]["near8X"],$dataMap["meta"]["near8Y"],0,($dataMap["meta"]["near8boss"])?1:($dataMap["meta"]["near8exit"])?2:0,($dataMap["meta"]["near8size"]|| 0))}};ICF["BOIMinimap"]["mapsetup"]["call"](this,_0x9334)}function _0x93C7(){this["initialize"]["apply"](this,arguments)}function _0x93DC(_0x9373,_0x9388,_0x935E,_0x9349){var _0x9334=ImageManager["loadSystem"]("Minimap");Window_Base["prototype"]["initialize"]["call"](this,_0x9373,_0x9388,_0x935E,_0x9349);this["opacity"]= 0;this["refresh"]();$GameMinimapObj= this}function _0x93F1(){return 0}function _0x9406(){return ICF["BOIMinimap"]["BackOpacity"]}function _0x941B(){this["contents"]["clear"]();if(!$gameSystem["BOIMinimapEnabled"]||  !$gameSystem["BOIMinimapShown"]){this["visible"]= false;return};this["visible"]= true;var _0x9334=ImageManager["loadSystem"]("Minimap");var _0x93B2=false;if(!_0x9334["isReady"]()){_0x93B2= true}else {this["changePaintOpacity"](false);this["contents"]["blt"](_0x9334,220,0,220,165,0,0);this["changePaintOpacity"](true);var _0x93C7=$GameMinimapData["data"][$GameMinimapData["posX"]+ " "+ $GameMinimapData["posY"]];if(!Array["isArray"](_0x93C7)){_0x93C7= [1,0,0]};var _0x93F1=$GameMinimapData["posX"]- 3;var _0x941B=$GameMinimapData["posY"]- 3;var _0x935E=(((_0x93C7[2]|| 0)% 2)== 1)?-50:-30;var _0x9373=((_0x93C7[2]|| 0)> 1)?-38:-23;var _0x93DC=_0x93F1;for(var _0x9388=_0x935E;_0x9388< 220;_0x9388+= 40){var _0x9406=_0x941B;for(var _0x939D=_0x9373;_0x939D< 165;_0x939D+= 30){_0x93C7= $GameMinimapData["data"][_0x93DC+ " "+ _0x9406];if(_0x93C7){if(_0x93C7[2]==  -3){if(_0x9388< 20&& _0x939D< 15){_0x93C7= $GameMinimapData["data"][(Number(_0x93DC)- 1)+ " "+ (Number(_0x9406)- 1)];ICF["BOIMinimap"]["Paint"](this["contents"],_0x9334,_0x93C7,_0x9388- 40,_0x939D- 30,false)}}else {if(_0x93C7[2]==  -2){if(_0x939D< 15){_0x93C7= $GameMinimapData["data"][_0x93DC+ " "+ (Number(_0x9406)- 1)];ICF["BOIMinimap"]["Paint"](this["contents"],_0x9334,_0x93C7,_0x9388,_0x939D- 30,false)}}else {if(_0x93C7[2]==  -1){if(_0x9388< 20){_0x93C7= $GameMinimapData["data"][(Number(_0x93DC)- 1)+ " "+ _0x9406];ICF["BOIMinimap"]["Paint"](this["contents"],_0x9334,_0x93C7,_0x9388- 40,_0x939D,false)}}else {var _0x9349=(_0x93DC== $GameMinimapData["posX"])&& (_0x9406== $GameMinimapData["posY"]);ICF["BOIMinimap"]["Paint"](this["contents"],_0x9334,_0x93C7,_0x9388,_0x939D,_0x9349)}}}};_0x9406++};_0x93DC++};this["contents"]["blt"](_0x9334,0,0,220,165,0,0)};if(_0x93B2){window["setTimeout"](function(_0x9334){if(_0x9334&& _0x9334["refresh"]){_0x9334["refresh"]()}},50,this)}}function _0x9430(){this["contents"]["clear"]()}function _0x9445(){ICF["BOIMinimap"]["onMapLoaded"]["call"](this);this["_minimap"]=  new _0x93C7(ICF["BOIMinimap"]["XPos"],ICF["BOIMinimap"]["YPos"],220,165);this["addWindow"](this["_minimap"]);$GameMinimapObj= this["_minimap"]}function _0x945A(){this["_minimap"]["clear"]();ICF["BOIMinimap"]["onMapExit"]["call"](this)}function _0x946F(_0x9349,_0x9334){ICF["BOIMinimap"]["pluginCommand"]["call"](this,_0x9349,_0x9334);if(_0x9349=== "ResetMinimap"){ICF["BOIMinimap"]["Reset"]()}else {if(_0x9349=== "DisableMinimap"){$gameSystem["BOIMinimapEnabled"]= false;if($GameMinimapObj){$GameMinimapObj["refresh"]()}}else {if(_0x9349=== "EnableMinimap"){$gameSystem["BOIMinimapEnabled"]= true;if($GameMinimapObj){$GameMinimapObj["refresh"]()}}else {if(_0x9349=== "HideMinimap"){$gameSystem["BOIMinimapShown"]= false;if($GameMinimapObj){$GameMinimapObj["refresh"]()}}else {if(_0x9349=== "ShowMinimap"){$gameSystem["BOIMinimapShown"]= true;if($GameMinimapObj){$GameMinimapObj["refresh"]()}}}}}}}Window_Minimap= _0x93C7;parameters= PluginManager["parameters"]("ICFSoft_BOIMinimap");ICF["BOIMinimap"]["BackOpacity"]= Number(parameters["Back Opacity"])|| 160;ICF["BOIMinimap"]["Enabled"]= parameters["Enable at start"]["toLowerCase"]()=== "true";ICF["BOIMinimap"]["Show"]= parameters["Show at start"]["toLowerCase"]()=== "true";ICF["BOIMinimap"]["XPos"]= Number(parameters["X Position"])|| 10;ICF["BOIMinimap"]["YPos"]= Number(parameters["Y Position"])|| 10;$GameMinimapData= {version:0,posX:0,posY:0,data:{}};$GameMinimapObj= null;ICF["BOIMinimap"]["Paint"]= _0x9334;ICF["BOIMinimap"]["AddSlot"]= _0x9349;ICF["BOIMinimap"]["Reset"]= _0x935E;ICF["BOIMinimap"]["createGameObjects"]= DataManager["createGameObjects"];DataManager["createGameObjects"]= _0x9373;ICF["BOIMinimap"]["extractSaveContents"]= DataManager["extractSaveContents"];DataManager["extractSaveContents"]= _0x9388;ICF["BOIMinimap"]["makeSaveContents"]= DataManager["makeSaveContents"];DataManager["makeSaveContents"]= _0x939D;ICF["BOIMinimap"]["mapsetup"]= Game_Map["prototype"]["setup"];Game_Map["prototype"]["setup"]= _0x93B2;_0x93C7["prototype"]= Object["create"](Window_Base["prototype"]);_0x93C7["prototype"]["constructor"]= _0x93C7;_0x93C7["prototype"]["initialize"]= _0x93DC;_0x93C7["prototype"]["standardPadding"]= _0x93F1;_0x93C7["prototype"]["translucentOpacity"]= _0x9406;_0x93C7["prototype"]["refresh"]= _0x941B;_0x93C7["prototype"]["clear"]= _0x9430;ICF["BOIMinimap"]["onMapLoaded"]= Scene_Map["prototype"]["onMapLoaded"];Scene_Map["prototype"]["onMapLoaded"]= _0x9445;ICF["BOIMinimap"]["onMapExit"]= Scene_Map["prototype"]["terminate"];Scene_Map["prototype"]["terminate"]= _0x945A;ICF["BOIMinimap"]["pluginCommand"]= Game_Interpreter["prototype"]["pluginCommand"];Game_Interpreter["prototype"]["pluginCommand"]= _0x946F
})();